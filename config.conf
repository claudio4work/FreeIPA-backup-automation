# FreeIPA Backup Automation Configuration
# This file contains configuration settings for the backup and cleanup scripts

# =============================================================================
# BACKUP SETTINGS
# =============================================================================

# Directory where backups will be stored
# Default: /var/lib/ipa/backup
BACKUP_DIR="/var/lib/ipa/backup"

# Log file for backup operations
# Default: /var/log/freeipa-backup.log
LOG_FILE="/var/log/freeipa-backup.log"

# Lock file to prevent multiple backup processes
# Default: /var/run/freeipa-backup.lock
LOCK_FILE="/var/run/freeipa-backup.lock"

# =============================================================================
# RETENTION POLICY SETTINGS (in days)
# =============================================================================

# Keep daily backups for this many days
# Default: 7 days
DAILY_RETENTION=7

# Keep weekly backups (Mondays) for this many days
# Default: 28 days (4 weeks)
WEEKLY_RETENTION=28

# Keep monthly backups (1st of each month) for this many days
# Default: 365 days (12 months)
MONTHLY_RETENTION=365

# Keep yearly backups (January 1st) for this many days
# Set to 0 to keep forever
# Default: 0 (keep forever)
YEARLY_RETENTION=0

# =============================================================================
# MONITORING AND ALERTING
# =============================================================================

# Enable email notifications (true/false)
# Default: false
EMAIL_NOTIFICATIONS=false

# Email address to send notifications to
# Only used if EMAIL_NOTIFICATIONS=true
EMAIL_TO=""

# Email subject prefix
# Default: "[FreeIPA Backup]"
EMAIL_SUBJECT_PREFIX="[FreeIPA Backup]"

# SMTP server settings (if using email notifications)
SMTP_SERVER=""
SMTP_PORT="587"
SMTP_USER=""
SMTP_PASSWORD=""
SMTP_USE_TLS=true

# Webhook URL for notifications (e.g., Slack, Teams, Discord)
# Leave empty to disable webhook notifications
WEBHOOK_URL=""

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================

# Maximum backup file age in days before considering it stale
# This is a safety check for cleanup operations
# Default: 3650 (10 years)
MAX_BACKUP_AGE=3650

# Minimum free disk space required before starting backup (in MB)
# Set to 0 to disable this check
# Default: 1024 (1GB)
MIN_FREE_SPACE=1024

# Enable backup compression (if supported by ipa-backup)
# Default: false
ENABLE_COMPRESSION=false

# Backup verification - check backup integrity after creation
# Default: true
VERIFY_BACKUP=true

# Maximum number of backup processes that can run concurrently
# Default: 1
MAX_CONCURRENT_BACKUPS=1

# =============================================================================
# SYSTEMD SERVICE SETTINGS
# =============================================================================

# User to run the backup service as
# Default: root (required for FreeIPA operations)
BACKUP_USER="root"

# Group to run the backup service as
# Default: root
BACKUP_GROUP="root"

# Nice level for backup process (-20 to 19, lower = higher priority)
# Default: 10 (lower priority)
NICE_LEVEL=10

# IO scheduling class (1=RT, 2=BE, 3=IDLE)
# Default: 2 (Best Effort)
IONICE_CLASS=2

# IO scheduling priority (0-7, lower = higher priority)
# Default: 4
IONICE_PRIORITY=4

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# Example: High frequency backup environment
# DAILY_RETENTION=14
# WEEKLY_RETENTION=56
# MONTHLY_RETENTION=730

# Example: Low frequency backup environment  
# DAILY_RETENTION=3
# WEEKLY_RETENTION=14
# MONTHLY_RETENTION=180

# Example: Custom backup directory
# BACKUP_DIR="/backup/freeipa"

# Example: Enable email notifications
# EMAIL_NOTIFICATIONS=true
# EMAIL_TO="admin@example.com"
# SMTP_SERVER="smtp.example.com"
# SMTP_USER="backup@example.com"
# SMTP_PASSWORD="your-password-here"
